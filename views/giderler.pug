extends layout
block content

    script(type="text/javascript").
        const giderSil = (e, ID) => {
            e.preventDefault();
            $.post('/gider-sil', {ID})
            .then(data => {
                location.reload();
            })
            .catch(err => window.alert("Hata ;\n"+JSON.stringify(err)));
        }

    .row.mt-4
        .col-md-12
            .card(style="max-height: 100%; overflow-y: auto;")
                .card-body
                    table.table
                        h3 Giderlerim
                        thead
                            tr
                                th(scope='col', style="width: 30px;")
                                th(scope='col', style="width: 30%;") Miktar
                                th(scope='col', style="width: 30%;") Kasa
                                th(scope='col') Tarih
                                th(scope='col') Sil
                        tbody
                            each gider, index in giderler
                                tr
                                    - const aylar = [ "Ocak", "Şubat", "Mart", "Nisan", "Mayıs", "Haziran", "Temmuz", "Ağustos", "Eylül", "Ekim", "Kasım", "Aralık" ]
                                    - const tarih = (gider.tarih.getDate() < 10 ? (0+""+gider.tarih.getDate()) : gider.tarih.getDate())+" "+aylar[gider.tarih.getMonth()]+" "+gider.tarih.getFullYear()
                                    td=index
                                    th #{gider.miktar} ₺
                                    td=gider.kasaAdi
                                    td=tarih
                                    td
                                        button.btn.btn-danger(onclick='giderSil(event, "'+ gider.ID +'")')
                                            | Sil
    include helpers/ekleGider.pug